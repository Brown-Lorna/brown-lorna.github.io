<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Fish Haven</title>
        <meta name="description" content="Class assignment town page for a weather website.">
        <link rel="stylesheet" href="../../styles/normalize.css">
        <link rel="stylesheet" href="styles/small.css">
        <link rel="stylesheet" href="styles/large.css">
        <link href="https://fonts.googleapis.com/css?family=Lora&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Work+Sans&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <header>
            <div id="heading">
            <picture id="logo">
                <img src="images/weather-window-logo-200.jpg" alt="Weather Window logo" sizes="10vw"
                srcset="images/weather-window-logo-50.jpg 50w,
                        images/weather-window-logo-100.jpg 100w
                        "
                >
            </picture>
            <div id="titleMotto">
                    <h1>Weather Window</h1>
                    <div class="motto">
                        See what's coming!
                    </div>
                </div>
        </div>
            <nav class="clearfix">
                <ul class="primarynav">
                    <li><a href="#" title="Menu" onclick="toggleMenu()">&#9776; Menu</a></li>
                    <li><a href="index.html" title="Home">Home</a></li>
                    <li><a href="preston.html" title="Preston">Preston</a></li>
                    <li><a href="soda-springs.html" title="Soda Springs">Soda Springs</a></li>
                    <li><a class="active" href="#" title="Fish Haven">Fish Haven</a></li>
                    <li><a href="stormcenter.html" title="Storm Center">Storm Center</a></li>
                    <li><a href="gallery.html" title="Gallery">Gallery</a></li>
                </ul>
            </nav>    
        </header>
        <main>
            <h2 class="page-name">Fish Haven, Idaho</h2>
            <picture class="herophoto">
                <img 
                    srcset="images/calm-clouds-dock-600.jpg 600w,
                            images/calm-clouds-dock-1200.jpg 1128w"
                    src="images/calm-clouds-dock-600-1200.jpg" alt=" wooden dock on a lake with mountains" sizes="100vw">
            </picture>

            <div class="summary">
                <h3>Weather Summary</h3>
                <dl>
                    <dt>Currently</dt><dd>&nbsp;<span id="curr-condition">Cloudy</span></dd>
                    <dt>High</dt><dd>&nbsp;<span id="curr-temp">69</span> &#176;F</dd>
                    <dt>Humidity</dt><dd>&nbsp;<span id="humidity">51</span>&percnt;</dd>
                    <dt>Wind Speed</dt><dd>&nbsp;<span id="wspeed">4</span> mph</dd>
                    <dt>Wind/Chill</dt><dd>&nbsp;<span id="wchill"></span> &#176;F</dd>
                </dl>
            </div>

            <div class="fiveday">
            <h3 id="forecast">5 Day Forecast</h3>
            <div id="fiveday">
            </div>
        </div>

            <article>
                <picture class="articleimg">
                    <img srcset="images/action-energy-active-400.jpg 400w,
                                images/action-energy-active-800.jpg 800w
                                "
                            src="images/action-energy-active-800.jpg" alt="children running on a path through tall dried grasses" sizes="90vw"
                    >
                </picture>
                <h3>Running is for the Birds</h3>
                <p class="byline">by Darnell Christensen</p>
                <p>Samuel, is turning twelve! The Bird Sanctuary is celebrating his birthday by holding a fun run for their popular bald eagle. Anyone twelve and under is invited to join in Samuel’s Birthday Run.  This fun run will help to raise money for the Bird Sanctuary. Donations can be made to sponsor a child for every tenth of a mile they complete. </p>
                <P>Since it’s July, runners and their supporters should plan for hot, sunny weather. Don’t forget to use sun screen after being covered up all winter long. Water will be available all along the 1.2 mile run to help the runners stay hydrated. Some of the shady parts of the trail can still be chilly, so consider wearing a lightweight long-sleeved shirt. Collect your sponsor cards, put on your running shoes, and have fun running the trail for Samuel!</P>

            </article>
            <div id="townevents">

            </div>
        </main>
        <footer>
            <section class="foot">
                <h4>Weather Window</h4>
                <img id="mappin" src="images/iconfinder_map-marker_299087.png" alt="icon of map pin">
                <p id="address">&nbsp;&nbsp;&nbsp;&nbsp;74 South State St<br> 
                    Preston, ID 83263<br><br>
                    &phone; 999.555.4985<br>&#9993; <a href="mailto:weatherwindow@example.net">weatherwindow@oww.net</a>
                </p>
                <br>
                <a href="#" class="fa fa-facebook"></a>
                <a href="#" class="fa fa-pinterest"></a>
                <a href="#" class="fa fa-twitter"></a>
                <a href="#" class="fa fa-vimeo"></a>
                <br>
                    <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d11853.443341329395!2d-111.40081256753048!3d42.0354421933249!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sus!4v1562428337916!5m2!1sen!2sus" width="400" height="300" frameborder="0" style="border:0" allowfullscreen></iframe>
            </section>
            <p class="footer-bar">&copy;2019 Our Weather Window | Attributions | Lorna Brown<br>
                Data source is OpenWeatherMap: <a href="https://openweather.co.uk">https://openweather.co.uk</a><br>
            <span id="curdate"></span></p> 
        </footer>
        <script src="scripts/hamburger.js"></script>
        <script src="scripts/currentdate.js"></script>
        
        <script src="scripts/forecastinfo.js"></script>
        <script>        
            var weatherObj = new XMLHttpRequest();
            weatherObj.open('GET', 'https://api.openweathermap.org/data/2.5/weather?zip=83287,us&units=imperial&appid=ff61a8123e1362057ad25e88cd4cfb95', true);
            weatherObj.send();

            weatherObj.onload = function() {
                var jsonRespObj = JSON.parse(weatherObj.responseText);
                console.log(jsonRespObj);

                document.getElementById('curr-condition').innerHTML = jsonRespObj.weather[0].description;
                document.getElementById('curr-temp').innerHTML = jsonRespObj.main.temp;
                document.getElementById('humidity').innerHTML = jsonRespObj.main.humidity;
                document.getElementById('wspeed').innerHTML = jsonRespObj.wind.speed;  
                calculateWindChill();  
            } 

            // calculate windchill at the end so it uses the updated numbers
        
        </script>
        <script src="scripts/windchill.js"></script>
        <script>
                var section = document.querySelector("#townevents");
                var requestURL = "https://byui-cit230.github.io/weather/data/towndata.json";
                var request = new XMLHttpRequest();
                request.open("GET", requestURL);
                request.responseType = "json";
                request.send();
    
                request.onload = function() {
                var tEvents = request.response;
                showEvents(tEvents);
                }
    
                function showEvents(jsonObj) {
                    var townStuff = jsonObj.towns;
          
                    for (var i = 0; i < townStuff.length; i++) {
                        var myArticle = document.createElement("article");
                        var myH3 = document.createElement("h3");
                        var myList = document.createElement("ul");
    
                        if(townStuff[i].name == "Fish Haven") {
  
                            myH3.textContent = townStuff[i].name + " Events";

                            var townEvents = townStuff[i].events;
                            for (var j = 0; j < townEvents.length; j++) {
                                var listItem = document.createElement('li');
                                listItem.textContent = townEvents[j];
                                
                                myList.appendChild(listItem);
                            }

                            myArticle.appendChild(myH3);
                            myArticle.appendChild(myList);
    
                            section.appendChild(myArticle);
                        }
                    }
                }
            </script>
    </body>
</html>